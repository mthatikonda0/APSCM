@model AGE.CMS.Data.Models.CaseRecording.CaseRecordingModel

@{
    ViewBag.Title = "Print Case Recording";
}



<style>

    .double {
  zoom: 1;
  transform: scale(2);
  -ms-transform: scale(2);
  -webkit-transform: scale(2);
  -o-transform: scale(2);
  -moz-transform: scale(2);
  transform-origin: 0 0;
  -ms-transform-origin: 0 0;
  -webkit-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -webkit-transform-origin: 0 0;
}

</style>

@using (Html.BeginForm("PrintCaseRecordingPost", "Case", FormMethod.Post))
{
    @*@Html.AntiForgeryToken()*@
    @Html.ValidationSummary(true)

    <div class="container" id="Print">

        <div class="panel panel-warning">

            <div class="panel-heading">
                <h2 class="panel-title">
                    <span class="titletextbegin">
                        <span class="glyphicon glyphicon-print"></span><span class="textspace">
                            <text>Print Case Recording</text>
                        </span>
                    </span>
                </h2>

            </div>

            <div id="printdata" class="form-horizontal">
                <div class="row nextline">
                    <div class="row nextline heading" id="imagelogo" style="border-bottom: 2px solid black">
                        <div class="pull-left" id="logoidoa" style="float:left">
                            <div id="" align="center" style="float:left">
                                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                                     width="185px" height="70px" viewBox="0 0 250.000000 99.000000"
                                     preserveAspectRatio="xMidYMid meet">

                                    <g transform="translate(0.000000,99.000000) scale(0.100000,-0.100000)"
                                       fill="#000000" stroke="none">
                                        <path d="M310 903 c0 -7 5 -13 10 -13 6 0 10 -7 10 -15 0 -8 5 -15 10 -15 31
                                    0 -4 -58 -38 -63 -35 -5 -49 -24 -35 -46 10 -16 8 -24 -14 -47 -16 -18 -28
                                    -44 -31 -69 -4 -36 0 -47 29 -80 18 -21 33 -47 34 -59 0 -17 5 -20 28 -18 30
                                    3 34 -11 15 -53 -10 -23 -9 -29 14 -50 14 -13 28 -22 31 -19 9 9 27 -24 31
                                    -55 2 -18 8 -37 13 -42 6 -6 139 -9 344 -7 322 3 336 4 379 25 44 22 44 22 65
                                    3 39 -37 70 -41 256 -34 165 7 179 9 179 26 0 14 -8 18 -34 18 -19 0 -38 5
                                    -41 11 -4 5 7 45 24 87 l31 77 132 -2 132 -2 27 -68 c39 -95 38 -103 -11 -103
                                    -33 0 -40 -3 -40 -20 0 -19 7 -20 135 -20 128 0 135 1 135 20 0 14 -7 20 -22
                                    20 -13 0 -29 4 -36 9 -13 8 -163 345 -249 559 -20 49 -29 62 -47 62 -17 0 -27
                                    -14 -50 -67 -16 -38 -53 -123 -84 -191 l-55 -123 -13 36 c-24 71 -95 121 -183
                                    132 -43 5 -49 9 -60 39 -6 18 -37 55 -67 83 -91 83 -96 84 -556 86 -328 2
                                    -398 0 -398 -12z m113 -15 c3 -11 17 -18 43 -20 37 -3 39 -5 46 -43 7 -38 -2
                                    -207 -9 -175 -3 13 -24 14 -128 12 -69 -2 -125 -1 -125 2 0 3 9 20 20 38 13
                                    23 16 38 10 48 -15 23 -12 30 10 30 26 0 70 43 70 68 0 11 -7 25 -15 32 -26
                                    21 -17 30 29 28 32 -2 46 -8 49 -20z m310 -58 c5 -19 7 -145 5 -278 -6 -271
                                    -4 -264 -73 -260 l-40 3 -3 279 c-2 217 1 281 10 288 7 4 31 7 52 6 36 -3 41
                                    -6 49 -38z m327 20 c59 -11 112 -46 141 -94 37 -59 35 -72 -13 -124 -33 -35
                                    -48 -62 -58 -100 -12 -53 -7 -130 11 -164 7 -14 3 -20 -18 -31 -59 -31 -180
                                    -45 -252 -31 l-31 7 0 268 0 268 23 4 c43 8 145 7 197 -3z m753 -227 l45 -103
                                    -108 0 -108 0 50 113 c27 61 52 119 56 127 4 10 8 7 13 -10 4 -14 27 -71 52
                                    -127z m-376 2 c51 -58 68 -197 34 -272 -31 -67 -90 -89 -158 -56 -55 26 -61
                                    52 -25 102 41 56 64 131 66 206 l1 62 30 -8 c17 -5 40 -20 52 -34z m-202 -113
                                    c-4 -26 -10 -41 -12 -34 -3 7 -2 34 2 60 4 26 10 41 12 34 3 -7 2 -34 -2 -60z">


                                        </path>
                                    </g>
                                </svg><br />
                            </div>
                        </div>
                        <h2 style="text-align: center"> Illinois Department on Aging APS</h2>
                        <h3 style="text-align: center"> Case Recording </h3>
                    </div>
                </div>
                <div>

                    @Html.HiddenFor(model => model.Id)
                    @Html.HiddenFor(model => model.CaseheaderId)
                    
                    <div class="form-group">
                        <div class="col-md-offset-10 col-md-2 btn-group">
                            <a class="btn btn-warning noprint" id="print" title=" Print "> Print</a>
                            <a id="cancel" rel="tooltip" class="btn btn-default btn-md noprint" title=" Cancel " href="@Url.Action("ManageCase", "Case", new{ CaseheaderId = Model.CaseheaderId})">Cancel</a>
                        </div>
                    </div>
                    <div class="row nextline" style="width: 98%; margin-right: 5px; margin-left: 15px">
                        @Html.Partial("_ViewClientCMS", Model.viewCaseHeader.Client)
                    </div>


                    <div id="DetailCaseRecordings" class="form-group" style="width: 99%; margin-left: 1%!important">
                        <fieldset>

                            <table style="width: 100%;" id="thistable">
                                <tr>
                                    <td colspan="2">
                                        <table width="100%">
                                            <tr>
                                                <td width="9%" class="noprint ">
                                                    <div> @Html.CheckBox("all", false, new { @class = "double", @id = "all" })&nbsp; &nbsp;<textspace style="font-size:18px"> Print All</textspace></div>

                                                </td>
                                                <td style="text-align: center">
                                                    <label><b>Case Recordings</b></label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <hr />
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                @for (int i = 0; i < Model.helper.DraftCaseRecordings.Count; i++)
                                {
                                    <tr class="case-record" id=@("record_" + i)>
                                        <td>
                                            <table class="table  table-striped" width="100%">
                                                <tr>
                                                    <td rowspan="2" width="2%" valign="top" class="noprint">
                                                        @Html.CheckBox("selectrecord", false, new { @id = "select_" + i })
                                                    </td>
                                                    <td>
                                                        <table width="100%">
                                                            <tr>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].Date, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Html.DisplayFor(m=>m.helper.DraftCaseRecordings[i].Date, "{0:MM/dd/yyyy}")
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].Type, htmlAttributes: new { @class = "" }):-
                                                                    </b>@Model.helper.DraftCaseRecordings[i].Type
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].Time, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].Time
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].TravelTime, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].TravelTime
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].CreatedBy, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].CreatedBy.Remove(0, 9).Replace(".", " ").ToUpperInvariant()
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].CreatedOn, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].CreatedOn
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].IsSupervisoragrees, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].IsSupervisoragrees
                                                                </td>
                                                                <td>
                                                                    <b>
                                                                        @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].IsLateEntry, htmlAttributes: new { @class = "" })
                                                                        :-
                                                                    </b>
                                                                    @Model.helper.DraftCaseRecordings[i].IsLateEntry
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="98%" colspan="2">
                                                        <b>
                                                            @Html.LabelFor(model => model.helper.DraftCaseRecordings[i].DocumentationOfActivity, htmlAttributes: new { @class = "" })
                                                        </b>
                                                        <br />
                                                        @Html.Raw(Model.helper.DraftCaseRecordings[i].DocumentationOfActivity)
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                }
                            </table>
                        </fieldset>
                    </div>                   
                </div>
            </div>
        </div>
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#editclientbutton").hide();
        $('#CaseRecordingsTable').DataTable();

        $('.datepicker').datepicker({ format: "dd-mm-yyyy" });

        $('#Submit').on('click', function () {

            var submit = true;
            var message = "";
            if (!$('#FromDate').val()) {
                submit = false;
                msg = "Please Enter Valid From Date.\n";
            }

            if (!$('#ToDate').val()) {
                submit = false;
                msg = msg + "Please Enter Valid To Date.\n";
            }

            if (!$('#Select:checked').val()) {
                submit = false;
                msg = msg + "Please Select Search By.\n";
            }

            if (!submit) {
                alert(msg);
                msg = "";
            }
            else {
                $('form').submit();
            }
        });

        $('#all').on('change', function () {
            var checked = $('#all').prop('checked');
            if (checked) {
                $("input[name*='selectrecord']").each(function () {
                    $(this).prop('checked', true);
                });
            }
            else {
                $("input[name*='selectrecord']").each(function () {
                    $(this).prop('checked', false);
                });
            }
        });

        $("input[name*='selectrecord']").on('click', function () {
            if (!$(this).prop('checked')) {
                $('#all').prop('checked', false);
            }
        });
        $("#imagelogo").hide();
        $('#print').on('click', function () {
            $("#imagelogo").show();
            var template = $('#printdata').clone();
            $("input[id*='select']").each(function () {
                if ($(this).prop('checked')) {
                    //alert($(this).closest('.case-record').attr('id'));
                }
                else {
                    var id = $(this).closest('.case-record').attr('id');
                    template.find('#' + id).remove();
                }
            });
            template.find('.noprint').remove();
            Print(template);
            $("#imagelogo").hide();
        });

        function Print(template) {
            //alert(template.html());
            //var w = window.open();
            var w = window.open("", "popupWindow", "width=600, height=400, scrollbars=yes");
            var html = template.html();

            $(w.document.body).html(html);
            w.print();
            w.close();
        }
        ////alert('loaded');
        //$('#Print').printThis({
        //    debug: false,
        //    importCSS: true,
        //    printContainer: true,
        //    loadCSS: "~/Scripts/bootstrap.min.js",
        //    pageTitle: "",
        //    removeInline:false
        //});
        //window.print();
        //$('#Print').printElement();
    });
</script>
